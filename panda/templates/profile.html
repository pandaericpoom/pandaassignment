<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="utf-8"/>
 
<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>


  

</head>
<body>
  <div class="main_body ">
  
  <!--Nav bar-->
  <nav class="navbar sticky-top navbar-expand-sm navbar-dark" style="background-color: #007904;">
   <a class="navbar-brand" style="color:white" href="http://localhost:5000/">Eric's Housing Agency</a>
 
   <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    <span class="navbar-toggler-icon"></span>
   </button>
      
   <div class="collapse navbar-collapse" id="collapsibleNavbar">
      <ul class="navbar-nav">
   
      <li class="nav-item">
         <a class="nav-link" style="color:white" href="http://localhost:5000/house" >Store</a>
      </li>

    <li class="nav-item">
      <a class="nav-link" style="color:white" href="http://localhost:5000/registor_page">Registration</a>
    </li>

    <li class="nav-item">
      <a class="nav-link" style="color:white" href="http://localhost:5000/profile">My account</a>
    </li>

      </UL>
   </div>  
   </nav>


<!-- header -->
<header>
      {% for item in personal_detail %}
      <h1 class="page_head"> WELCOME {{item[0]}} {{item[1]}}╰(￣▽￣)╭</h1>
      {% endfor %}
    
</header>


<!-- content -->
<div class="main_content container-fluid"> 
  
  




  <div class="row ">

    <div class="col-12" >
     
      
      <div id="user_info">
        <br>
        <h2>Personal data</h2>
      <div class="user_personal" style="padding: 15px;"id="">
        <br>
        {% for item in personal_detail %}
        <div class="row">
          <div class="col-sm-6">
          <tr>
            <td><h5 style="font-weight: bold">Name: {{item[0]}} {{item[1]}}</h5></td>
            
            <td><h5 style="font-weight: bold">Username: {{item[5]}}</h5></td> 

          </tr>
          </div>
          <div class="col-sm-6">
          <tr>
            <td><h5>Sex: {{item[2]}}</h5></td>
            <td><h5>Phone: {{item[3]}}</h5></td>
            <td><h5>Email: {{item[4]}}</h5></td>            
            <td><h5 style="font-weight: bold">Upcoming booking date: {{item[7]}}</h5></td>
          </tr>
          </div>
          <br>
        </div>
        
        <br>
        
        <button class="btn btn-primary update_btn" onclick="update_fill()">    </button>
        <form  action = "http://localhost:5000/fir_name_update" method = "POST">
          <div class="form-group update_content"style="align-content: center">
            <p>First name:&nbsp; </p>
            <div class="row" style="padding-left: 15px">
              <input type="email" name="email_address" class="email_address"  value={{item[4]}}>
              <input type="text" name="first_name_update" class="form-control" style="width:70%" value={{item[0]}} required>
              <p>&nbsp;</p>
              <button class="btn btn-primary" input="submit">Submit</button>
            </div>
          </div> 
        </form> 
        
        <form  action = "http://localhost:5000/las_name_update" method = "POST">
          <div class="form-group update_content"style="align-content: center">
            <p>Last name:&nbsp; </p>
            <div class="row"  style="padding-left: 15px">
              <input type="email" name="email_address" class="email_address"  value={{item[4]}}>
              <input type="text" name="last_name_update" class="form-control" style="width:70%"  value={{item[1]}} required>
              <p>&nbsp;</p>
              <button class="btn btn-primary" input="submit">Submit</button>
            </div>
          </div> 
        </form> 

        <form  action = "http://localhost:5000/phone_update" method = "POST">
          <div class="form-group update_content"style="align-content: center">
            <p>Phone number:&nbsp; </p>
            <p id="phone_error" style="color:red"></p>
            <div class="row"  style="padding-left: 15px">
              
              <input type="email" name="email_address" class="email_address"  value={{item[4]}}>
              <input type="number" name="phone_update"  id="phone_update" class="form-control" min="10000000" max="99999999" style="width:70%"  oninput="phone_check()" value={{item[3]}} required> 
              <p>&nbsp;</p>
              <button class="btn btn-primary" input="submit" id="phone_submit">Submit</button>
            </div>
          </div> 
        </form> 

        <form  action = "http://localhost:5000/email_update" method = "POST">
          <div class="form-group update_content"style="align-content: center">
            <p>Email:&nbsp; </p>
            <div class="row"  style="padding-left: 15px">
              <input type="email" name="email_address" class="email_address"  value={{item[4]}}>
              <input type="email" name="email_update" class="form-control" style="width:70%" value={{item[4]}} required>
              <p>&nbsp;</p>
              <button class="btn btn-primary" input="submit">Submit</button>
            </div>
          </div> 
        </form> 

        <form  action = "http://localhost:5000/usrn_update" method = "POST">
          <div class="form-group update_content"style="align-content: center">
            <p>User name:&nbsp; </p>
            <div class="row"  style="padding-left: 15px">
              <input type="email" name="email_address" class="email_address"  value={{item[4]}}>
              <input type="text" name="usrn_update" class="form-control" style="width:70%" value={{item[5]}} required>
              <p>&nbsp;</p>
              <button class="btn btn-primary" input="submit">Submit</button>
            </div>
          </div> 
        </form> 

        <form  action = "http://localhost:5000/uspw_update" method = "POST">
          <div class="form-group update_content"style="align-content: center">
            <p>Password:&nbsp; </p>
            <p id="invalid_password" style="color:red"></p>
            <p id="invalid_password_len" style="color:red"></p>
            <div class="row"  style="padding-left: 15px">
              <input type="email" name="email_address" class="email_address"  value={{item[4]}}>
              <input type="password" name="password_update" id="password_update" class="form-control" oninput="pw_check()" style="width:70%"  required>
              
              <p>&nbsp;</p>
              
            </div>
            <br>
            <p>Password confirm:&nbsp; </p>
            <p id="invalid_password_cf" style="color:red"></p>
            <div class="row"  style="padding-left: 15px">
              
              <input type="password" name="password_confirm_update" id="password_confirm_update" class="form-control" oninput="pw_confirm_check()" style="width:70%" required>
              <p>&nbsp;</p>
              <button class="btn btn-primary" input="submit" id="pw_update_submit">Submit</button>
            </div>
          </div> 
        </form> 
        
        
      </div>
      <br>
   
  <div class="row " style="padding: 5px">
    

    <div class="col-12" >
      
      <h2 id="heading_pd">Upcomming Booking</h2>
      <div id="list_of_product">
            
      </div>    
      
      <div class="product"  style="padding: 5px;">
        <div class="row">
          <div class="col-sm-4 col-xl-2 ">
            <img src="/static/img/{{item[8]}}.jpg" class="product_photo" style=" height: 100% ;width:100%;  max-width: 200px; max-height: 200px">
          </div>
          <div class="col-sm-8 col-xl-10 ">
            <tr>
                <td><h5>House ID: {{item[8]}}</h5></td>
                <a href="http://localhost:5000/logout" method = "POST"><h6>< Log out</h6></a>
            </tr>
          </div>
        </div>
        
      </div>
      <br>
      {% endfor %}
      
      


      </div>
    </div>
    
  </div>
  

  
  

</div> 
</div> 
</div>
</div>


<script type="text/javascript">

$(".update_content").hide();
$(".email_address").hide();



function phone_check() {
  var phone=document.getElementById("phone_update").value;
  
  if (phone.length!== 8){
    document.getElementById("phone_error").innerHTML = "Should be 8 digit";
    $("#phone_submit").hide()
  }else{
    document.getElementById("phone_error").innerHTML = "";
    $("#phone_submit").show()
  }
}

function pw_check(){

  var usr_pw = document.getElementById("password_update").value;
  var pw_check_identify=false;
  var pw_check_identify2=false;
  var check_include_num=/\d/;
  var check_include_char=/[A-Z]/i;

  $("#pw_update_submit").hide()

  if(pw_check_identify==false){
    document.getElementById("invalid_password").innerHTML = "Must contain letters (A-Z/a-z) and numbers (0-9)";
  }

  if (usr_pw.match("^[a-zA-Z0-9]+$")){
      if(usr_pw.match(check_include_num)){
        if(usr_pw.match(check_include_char)){
        
         pw_check_identify=true;
        
        }
      } 
    } 



  if(usr_pw.length<8){
      document.getElementById("invalid_password_len").innerHTML = "Must at least 8 characters in length";
        
    } else{document.getElementById("invalid_password_len").innerHTML = "";
      pw_check_identify2=true}

  if((pw_check_identify2==true)&&(pw_check_identify==true)){
    $("#pw_update_submit").show()
    document.getElementById("invalid_password").innerHTML = "";
    document.getElementById("invalid_password_len").innerHTML = "";
  }
   
}


function pw_confirm_check(){
  var usr_pw = document.getElementById("password_update").value;
  var usr_pw_confirm = document.getElementById("password_confirm_update").value;

  if (usr_pw !== usr_pw_confirm){
    document.getElementById("invalid_password_cf").innerHTML = "Passwords are not same";
    $("#pw_update_submit").hide()
  }else{
    $("#pw_update_submit").show()
    document.getElementById("invalid_password_cf").innerHTML = "";
  }
}




function update_fill(){
  $(".update_content").show();
  $(".update_btn").hide();
}

function gototop() {
   $("html, body").animate({ scrollTop: 0 }, 300);
}
</script>


</body>
</html>